- id: remote_kerstboom_pressed
  alias: Remote kerstboom pressed
  mode: restart
  trigger:
    platform: event
    event_type: hue_event
  condition:
    condition: template
    value_template: "{{ trigger.event.data.id == \"afstandsbediening_2\" }}"
  action:
    - choose:
        - conditions:
            - condition: and
              conditions:
                - condition: state
                  entity_id: switch.plug_christmas_tree_socket
                  state: "off"
                - condition: template
                  value_template: "{{ trigger.event.data.event == 1002 or trigger.event.data.event == 2002 }}"
          sequence:
            service: switch.turn_on
            entity_id: switch.plug_christmas_tree_socket
        - conditions:
            - condition: and
              conditions:
                - condition: state
                  entity_id: switch.plug_christmas_tree_socket
                  state: "on"
                - condition: template
                  value_template: "{{ trigger.event.data.event == 3002 or trigger.event.data.event == 4002 }}"
          sequence:
            service: switch.turn_off
            entity_id: switch.plug_christmas_tree_socket
